{% extends "layout.html" %}
{% block title %}Gestione Utenti{% endblock %}
{% block content %}
<div class="panel full-width">
    
    <!-- 
      NUOVO contenitore per il titolo e il pulsante. 
      Questo risolverà il problema della sovrapposizione.
    -->
    <div class="panel-header">
        <h2>Gestione Utenti</h2>
        <a href="{{ url_for('register') }}" class="button-link">Aggiungi Nuovo Utente</a>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Ruolo</th>
                    <th>Azioni</th>
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr>
                    <td>{{ u.id }}</td>
                    <td>{{ u.username }}</td>
                    <td>{% if u.is_admin %}Amministratore{% else %}Utente{% endif %}</td>
                    <td class="action-buttons">
                        <!-- 
                          Aggiungiamo un'azione di eliminazione (disabilitata per l'admin principale).
                          Questo rende la pagina più utile.
                        -->
                        {% if not u.is_admin %}
                            <a href="#" class="delete-btn" onclick="alert('Funzione di eliminazione non ancora implementata.')">Elimina</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}